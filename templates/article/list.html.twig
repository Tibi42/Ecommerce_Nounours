{% extends 'base.html.twig' %}

{% block title %}
	Liste des articles
{% endblock %}

{% block body %}
	<div class="container mt-5">
		<div class="d-flex justify-content-between align-items-center mb-4">
			<h1>Liste des articles</h1>
			<a href="{{ path('app_article_new') }}" class="btn btn-primary">Créer un nouvel article</a>
		</div>

		{% if articles|length > 0 %}
			<div class="row g-4">
				{% for article in articles %}
					<div class="col-md-6 col-lg-4">
						<div class="card h-100 shadow-sm">
							<div class="card-body">
								<div class="d-flex justify-content-between align-items-start mb-3">
									<h5 class="card-title mb-0">{{ article.name }}</h5>
									<span class="badge bg-secondary">#{{ article.id }}</span>
								</div>

								<div class="mb-3">
									<p class="card-text mb-2">
										<strong>Taille:</strong>
										{{ article.size ?? '-' }}
									</p>
									<p class="card-text mb-2">
										<strong>Prix:</strong>
										<span class="text-success fw-bold">{{ article.price }}
											€</span>
									</p>
									{% if article.publishAt %}
										<p class="card-text mb-2">
											<small class="text-muted">
												<strong>Publié le:</strong>
												{{ article.publishAt|date('d/m/Y') }}
											</small>
										</p>
									{% endif %}
									<p class="card-text">
										<strong>Statut:</strong>
										<span class="badge {{ article.ispublished ? 'bg-success' : 'bg-secondary' }}">
											{{ article.ispublished ?? 'Non publié' }}
										</span>
									</p>
								</div>
							</div>
							<div class="card-footer bg-transparent border-top-0">
								<div class="btn-group w-100" role="group">
									<a href="{{ path('app_article_edit', {id: article.id}) }}" class="btn btn-warning btn-sm">Modifier</a>
									<form method="post" action="{{ path('app_article_delete', {id: article.id}) }}" class="d-inline" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet article ?');">
										<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ article.id) }}">
										<button type="submit" class="btn btn-danger btn-sm">Supprimer</button>
									</form>
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		{% else %}
			<div class="alert alert-info text-center">
				<i class="bi bi-info-circle"></i>
				Aucun article trouvé.
			</div>
		{% endif %}
	</div>
{% endblock %}
